<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Building Networks of Hospitals Through Patients Transfers • HospitalNetwork</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Building Networks of Hospitals Through Patients Transfers">
<meta property="og:description" content="Set of tools to help interested researchers to build hospital networks 
  from data on hospitalized patients transferred between hospitals. Methods provided 
  have been used in Donker T, Wallinga J, Grundmann H. (2010) &lt;doi:10.1371/journal.pcbi.1000715&gt;, 
  and Nekkab N, Crépey P, Astagneau P, Opatowski L, Temime L. (2020) &lt;doi:10.1038/s41598-020-71212-6&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">HospitalNetwork</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/HospitalNetwork-Workflow.html">HospitalNetwork-Workflow</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/PascalCrepey/HospitalNetwork/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="hospitalnetwork">HospitalNetwork<a class="anchor" aria-label="anchor" href="#hospitalnetwork"></a>
</h1></div>
<p><em>Building networks of hospitals through patients transfers</em></p>
<p>This R package contains functions to help interested researchers to build hospital networks from data on hospitalized patients transferred between hospitals.</p>
<p>The aim of the project is to provide a common framework to build and analyze hospital networks.</p>
<p>This project is partly supported by the NeWIS (NetWorks to Improve Surveillance) initiative, funded by JPIAMR, and by Sphinx project, funded by ANR.</p>
<div class="section level3">
<h3 id="step-0-installing-the-package">Step 0: Installing the package:<a class="anchor" aria-label="anchor" href="#step-0-installing-the-package"></a>
</h3>
<p>You can install the release version of this package from CRAN as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"HospitalNetwork"</span><span class="op">)</span></span></code></pre></div>
<p>Or you can install the development version from GitHub: - The package <code>devtools</code> needs to be installed first</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"devtools"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(“devtools”)</span></code></pre></div>
<ul>
<li>Then install the package from GitHub. Update or install all the required packages.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install_github</span><span class="op">(</span><span class="st">"PascalCrepey/HospitalNetwork@*release"</span><span class="op">)</span></span></code></pre></div>
<p>This command will install the latest “released” version of the package.</p>
</div>
<div class="section level3">
<h3 id="step-1-checking-the-consistency-of-the-database">Step 1: Checking the consistency of the database<a class="anchor" aria-label="anchor" href="#step-1-checking-the-consistency-of-the-database"></a>
</h3>
<p>The function <code><a href="reference/checkBase.html">checkBase()</a></code>should be run first, and the resulting checked/repaired database should be used in the following step. The function checks if :</p>
<ul>
<li>all required variables are present,</li>
<li>any records contain missing values,</li>
<li>identifiers are in the correct format (character),</li>
<li>admission and discharge dates are in date format, and if not, convert them into dates,</li>
<li>discharges happened at same or later day as admission</li>
<li>if any hospital stays overlap, and correct if so.</li>
</ul>
<p>The minimal way of running this is: <code>checkBase(base)</code> where base is the patient admission database. It takes the following parameters to adjust to the database in question: (default values are indicated in bold characters)</p>
<ul>
<li>deleteErrors = “subject” or <strong>“record”</strong>: how to take care of missing or erroneous records. Delete just the record with an error, or delete all records of the patient with one or more erroneous records.</li>
<li>convertDates = <strong>TRUE</strong>/FALSE: whether the dates should converted,</li>
<li>dateFormat = The format of date as a character string (e.g. %y%m%d for 20190524, or %d-%m-%y for 24-05-2019)</li>
<li>subjectID = the name of the column/variable containing the subject (i.e. patient) identifier</li>
<li>facilityID = as above, for facility (i.e. hospital) identifier</li>
<li>disDate = as above, for discharge date</li>
<li>admDate = as above, for admissions date</li>
<li>maxIteration = the maximum number of times the script runs through the database to correct for overlapping admissions. Ideally set to more than the required number of times.</li>
<li>verbose = TRUE/<strong>FALSE</strong>: if the script prints out what it is doing.</li>
</ul>
</div>
<div class="section level3">
<h3 id="step-2-reconstructing-the-network">Step 2: Reconstructing the network<a class="anchor" aria-label="anchor" href="#step-2-reconstructing-the-network"></a>
</h3>
<p>The best way the reconstruct the hospital network is creating a HospiNet object from the patient database. This object also allows for easy calculation of the network metrics as well as plotting and printing of results.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/hospinet_from_subject_database.html">hospinet_from_subject_database</a></span><span class="op">(</span><span class="va">checkedBase</span><span class="op">)</span></span></code></pre></div>
<p>This function has a number of similar input parameters as the previous: subjectID, facilityID, disDate, admDate, verbose. Next to that, the following parameters can also be input:</p>
<ul>
<li>noloops = <strong>TRUE</strong>/FALSE, indicating if movements/transfers to the same hospital as discharge should be included. These self-referrals are not necessary for the analysis of the hospitals network.</li>
<li>window_threshold = the number of days allowed between discharge and next admission to be counted as a movement or transfer. Suggest to set at <strong>365</strong> for full year, and use 0,7,30,182, and 365 for the final analysis</li>
<li>nmoves_threshold = Any edge/link between hospital with fewer or equal to this number of patients will be removed. Suggest to keep at default <strong>NULL</strong> or 0.</li>
<li>create_MetricsTable = <strong>TRUE</strong>/FALSE, indicates if the network metrics need to be immediately calculated, or only when called for.</li>
<li>count_option = <strong>“successive”</strong> or “all”: the way movements are counted, whether a sequence of admissions from hospital A to B to C are count as moves A→B and B→C (Successive) or A→B, B→C , and A→C (All)</li>
<li>condition = <strong>“dates”</strong>, “flags”, or “both”. Whether a move is counted based on the time difference between two stays (dates), or a variable indicating if the patient was directly transferred (flags), or both.</li>
</ul>
</div>
<div class="section level3">
<h3 id="step-3-exporting-and-plotting-results">Step 3: Exporting and plotting results.<a class="anchor" aria-label="anchor" href="#step-3-exporting-and-plotting-results"></a>
</h3>
<p>The result of the reconstruction and analysis can be easily saved as an RDS file, using</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">HospiNet</span>, <span class="st">"my_filename.RDS"</span><span class="op">)</span> </span></code></pre></div>
<p>since they are all stored in the HospiNet object. This object does not include the raw database, just the edge list (which is basically the same as the contact matrix), the various network metrics for each hospital, and metrics on the size of the used database (number of patients, admissions, hospitals, etc.).</p>
<p>Currently, the reconstructed network can be plotted as a matrix using <code>plot(HospiNet)</code> or <code>plot(HospiNet, type=”matrix”)</code>. This can also be done as a clustered matrix: <code>plot(HospiNet, type=”clustered_matrix”)</code>. In addition, you can also visualize the degree distribution of the nodes in the network with <code>plot(HospiNet, type = “degree”)</code>. We will try to include easy ways to plot the network in other ways as well.</p>
</div>
<div class="section level3">
<h3 id="example-of-use">Example of use:<a class="anchor" aria-label="anchor" href="#example-of-use"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>    <span class="co"># install.packages only need to be run once </span></span>
<span><span class="co"># and can be commented after use</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span>       <span class="co"># load the library allowing the HospitalNetwork package </span></span>
<span><span class="co"># download and installation</span></span>
<span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"PascalCrepey/HospitalNetwork@*release"</span><span class="op">)</span> <span class="co"># can be commented once it is installed</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pascalcrepey.github.io/HospitalNetwork/" class="external-link">HospitalNetwork</a></span><span class="op">)</span>    <span class="co"># load the HospitalNetwork library</span></span>
<span></span>
<span></span>
<span><span class="co"># Here, we create a dummy database for testing purposes,</span></span>
<span><span class="co"># final users can directly use their own database. This one looks like: </span></span>
<span><span class="co">#       sID fID      Adate      Ddate</span></span>
<span><span class="co">#  1: s001 f09 2019-02-19 2019-02-26</span></span>
<span><span class="co">#  2: s001 f10 2019-03-27 2019-03-31</span></span>
<span><span class="co">#  3: s001 f09 2019-04-22 2019-04-25</span></span>
<span><span class="co">#  4: s002 f08 2019-01-15 2019-01-20</span></span>
<span><span class="co">#  5: s003 f11 2019-02-14 2019-02-19</span></span>
<span><span class="co">#  ---                               </span></span>
<span><span class="co"># 228: s098 f01 2019-02-08 2019-02-12</span></span>
<span><span class="va">mydb</span> <span class="op">=</span> <span class="fu"><a href="reference/create_fake_subjectDB.html">create_fake_subjectDB</a></span><span class="op">(</span>n_subjects <span class="op">=</span> <span class="fl">1000</span>, n_facilities <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># checking the database</span></span>
<span><span class="va">mydb_checked</span> <span class="op">=</span> <span class="fu"><a href="reference/checkBase.html">checkBase</a></span><span class="op">(</span><span class="va">mydb</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># building the hospital network in a HospiNet object</span></span>
<span><span class="va">my_hosp_net</span> <span class="op">=</span> <span class="fu"><a href="reference/hospinet_from_subject_database.html">hospinet_from_subject_database</a></span><span class="op">(</span><span class="va">mydb_checked</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot the network as a "contact matrix"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">my_hosp_net</span><span class="op">)</span></span>
<span><span class="co">#plot the network as a "contact matrix" ordered by clusters (if any)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">my_hosp_net</span>, type <span class="op">=</span> <span class="st">"clustered_matrix"</span><span class="op">)</span></span>
<span><span class="co"># plot the degree (number of neighbors) distribution of hospitals in the network</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">my_hosp_net</span>, type <span class="op">=</span> <span class="st">"degree"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># save the network (not the original database)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">my_hosp_net</span>, file <span class="op">=</span> <span class="st">"my_hosp_net.RDS"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/PascalCrepey/HospitalNetwork/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/PascalCrepey/HospitalNetwork/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing HospitalNetwork</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Pascal Crépey <br><small class="roles"> Author, maintainer, copyright holder </small>  </li>
<li>Tjibbe Donker <br><small class="roles"> Author </small>  </li>
<li>Clément Massonnaud <br><small class="roles"> Author </small>  </li>
<li>Michael Lydeamore <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Pascal Crépey, Tjibbe Donker, Clément Massonnaud, Michael Lydeamore.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
